@Library('mylibrary@main') _
pipeline{
  agent none
  environment {
        ARTIFACTORY_CREDENTIALS = credentials('JFROG_PASSWORD')
    }
  stages{
    stage('Heading'){
      agent { label 'build' }
      steps{
      echo 'This job will automate the CICD'
      }
    }
    stage('checkout'){
      steps{
    agent { label 'build' }
      checkoutFile()
      }
    }
    stage('Build') {
      steps{
        agent { label 'build' }
       buildFile()
      }
    }
stage('Publish') {
steps {
        agent { label 'build' }
      publishFile()
    }
  }
stage('deploy') {
steps{
agent { label 'build' }
    deployFile(env.BUILD_NUMBER,'13.126.3.38')
}
}
}
  post{
    failure{
      echo 'The build has failed'
    }
  }
}
